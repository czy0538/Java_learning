# java语言程序设计

## 0.基本结构

### 0.1 基础结构

```java
import java.util.Scanner;//import java.util.*;倒入所有类

public class Main//至少一个类，首字母大写
{
	public static void main(String[] args)//主方法
    {
        System.out.println("Hello world");//大小写敏感，有分号
    }
}
```

### 0.1.1 输入与输出

- System.out表示标准输出设备

- System.in表示标准输入设备

- 从控制台读入需要创建Scanner类的对象

  ```java
  Scanner input=new Scanner(system.in);//把Scanner对象的引用赋给变量input
  ```

- print不换行，println自动换行

- 数字转为字符串的简单办法 1+"" 

### 0.1.2 变量与常量

- 变量基本同c++
- 常量 用final
- 命名习惯：
  - 小写字母明明变量和方法
  - 类名首字母大写
  - 常量所有字母大写

### 0.1.3 数据类型

基本同c++

- byte为整数的最小类型-128~127
- 字面量long型加l，否则被认为int
- 科学计数法为E
- bool型为boolean，true和false均为小写

### 0.1.4 String类型

*** String对象是不可改变的，一旦创建，内容不能再改变***

#### 0.1.4.0 字符串创建

- String newString =new String(s);
- var newString= new String(s);
- String newString=" s";
- String message=new String(charArray);

#### 0.1.4.1 简单方法

| 实例方法                             | 描述                                        |
| ------------------------------------ | ------------------------------------------- |
| .length()                            | 返回长度                                    |
| .charAt(index)                       | 返回指定字符位置                            |
| .concat(s2)                          | 返回连接后字符串                            |
| .trim()                              | 返回去掉两边空格的字符串                    |
| .equal(s2)                           | 若相同返回True                              |
| .compareTo(s2)                       | 返回整数，一个字符串是否大于小于等于s2      |
| .contains(s2)                        | s2是不是该字符串子串                        |
| .startsWith(string)/endsWith(string) | 是否以特定字符串开头/结尾                   |
| .substring(begin,end)                | 取从begin到end-1的子串                      |
| .indexOf(s,from)                     | 返回第一次出现s下标，从from开始，没有返回-1 |
| .lastIndexOf(s,from)                 | 返回最后出现s下标，从from开始，没有返回-1   |
| Type.parseType(string)               | 字符串转type类型数字                        |

```java
var str=new String(" Hello,Java "):  Hello,Java
str.length() :12
str.charAt(0) :
str.toUpperCase() : HELLO,JAVA
str.toLowerCase() : hello,java
str.trim() :Hello,Java
str.concat("hehe") : Hello,Java hehe
//加号也可以连接字符串,会对第一个数字进行转换成字符串类型
1+2= +1+2 12
1+2= +(1+2) 3
```



- 相等运算符只能检测是否指向同一个对象，不会告知内容是否相等
- 数字转字符串 String s=124+""

#### 0.1.4.2 字符串读入

input.nextLine()

不要再nextByte等后使用nextLine

#### 0.1.4.3 字符串的替换和分隔

str.replace(oldchar,newchar) 替换所有匹配的字符，返回新的字符串

str.replaceFirst(oldchar,newchar)替换第一个匹配的子字符**串**，返回新的字符串

str.replaceAll(oldchar,newchar)替换所有匹配的子字符**串**，返回新的字符串

str.split(分隔符)返回字符数组，包含被分隔符分割的子字符串集

#### 0.1.4.4 依照模式匹配、替换和分割

正则表达式regex

```java
        var str1 = new String("Java is fun");
        String s1 = "Java";
        System.out.println(str1.matches("Java"));
        System.out.println(str1.equals("Java"));
        System.out.println(str1.matches("Java.*"));
        System.out.println(s1.matches("Java"));
        System.out.println(s1.equals("Java"));
//输出:
false
false
true
true
true
```



#### 0.1.4.5字符串与数组转换

```java
		char [] chars="java".toCharArray();
        for(var i:chars)
        {
            System.out.println(i);
        }
        String str1 =new String(chars);
        System.out.println(str1);

        String str2= String.valueOf(chars);
        System.out.println(str2);
//out
j
a
v
a
java
java
```

#### 0.1.4.6 字符和数值转与字符串互转

```java
		var s = new String("3.14");
        double pi = Double.parseDouble(s);
        System.out.println((pi));

        var str = String.valueOf(pi);
        System.out.println(str)
```

#### 0.1.4.7格式化字符串

静态format方法，类似printf

```java
System.out.println("begin"+String.format("%7.2f%6d%-4s", 23.233, 99, "YYX")+"end");
begin  23.23    99YYX end
```



## 0.2方法（函数）

### 0.2.1 基本格式

```java
修饰符 返回值类型 方法名（形参列表）
{
方法体
}
```

### 0.2.2 重载方法

函数名相同，签名不同（形参类型），不能基于不同的修饰符或者返回值类型

java的普通变量不支持传引用



##　１数组

### 1.1 一维数组

#### 1.1.1 声明数组变量（创建一个引用）

elementType[] arrayRefVar;

也支持c++风格的声明方式

#### 1.1.2 创建数组

  arrayRefVar= new elementType[arraySize];

arraySize可以是变量

#### 1.1.3 数组初始化

  elementType [] arrayRefVar={value0,value1,...};

#### 1.1.4 foreach循环

  for(elementType element:arrayRefVar)

  无法改变，只能访问

#### 1.1.5 数组复制

  - 不可以直接用等于号，那样赋值的是引用
  - 1. 使用循环语句逐个复制
    2. 使用System类中的静态方法arraycopy
    3. 使用clone方法

```java
int[] sourceArray= {2,3,1,5,10};
int[] targetArray= new int[sourveArray.length]
//使用循环语句逐个复制
for(int i = 0; i<sourceArray.length;++i)
{
    targetArray[i]=sourceArray[i];
}
//arraycopy
System.arraycopy(sourceArray,srcPos,targetArray,tarPos,length)
```

#### 1.1.6 数组与方法

- 当将一个数组传递给方法时，数组的引用被传给方法

- 数组在java中是对象，jvm将对象储存在heap中，用于动态内存分配

- public static void name (int[] number)

- 当从方法中返回一个数组时，返回的是数组的引用

  ```java
  	public static int[] reverse(int[] in)
  	{
  		int[] array = new int[in.length];
  		for (int i = 0, j=in.length-1; i < in.length; ++i,--j)
  		{
  
  				array[j] = in[i];
  
  		}
  		return array;
  	}
  ```

  

- 可变参数列表，当作一个数组对待

  ```java
  public static int max(int... e)//参数类型 ... 名字
  	{
  		int max = e[0];
  		for (int i = 0; i < e.length; i++)
  		{
  			if (max < e[i])
  			{
  				max = e[i];
  			}
  		}
  		return max;
  	}
  ```

  



## 2.对象与类

可以把两个类放在一个文件中，文件中只能有一个类是public。public类必须与文件同名，非public类只能在自己的包里访问

### 2.1 定义类

```java
class Circle
{
	final double pi=3.1415926;
	double r;
	Circle()
	{
		Scanner input=new Scanner(System.in);//创建对象方法
		System.out.print("请输入半径r：");
		r=input.nextDouble();
	}
	Circle(double rr)
	{
		r=rr;
	}
	double area()
	{
		return Math.pow(r,2)*pi;
	}
}
```

大部分与cpp相同，只是找不同的地方。

- 引用类型默认值为null

- Java没有给方法中的局部变量赋默认值

  ```java
  public class Main()
  {
      public static String main(String args)
      {
         	A a=new A();
          int x;
          System.out.println(a.x);//x=0
          System.out.println(x);//error
      }
  }
  class A
  {
      int x;
  }
  ```



### 2.2 可见性修饰符

- public修饰符：用在类，方法，数据域前，表示他们可以被任何一个其他类访问。

- 如果没有，认为是friendly，只可被同一个包中任何一个类访问。

- private修饰符：只能在自己的类中被访问，同一个类的不同对象私有成员可以互访

- package packageName;
- 保护数据：数据设定为私有，然后通过get访问，set修改
- 给方法传递一个对象，是传递的对象的引用

### 2.3 this引用

this引用对象自身，常用在引用隐藏数据域，调用构造方法。

#### 2.3.1 引用隐藏数据域

如在set方法中，使用数据名作为参数名。

```java
class A
{
	int i;
	void setI(int i)
	{
		this.i=i;//局部变量i会掩盖类变量i，所以需要显式的this
	}
}
```

#### 2.3.2 使用this构造方法

```java
public class Circle
{
    private double radius;
   
    public Circle(double r)
    {
        this.r=r;
    }
    public Circle()
    {
        this.Circle(1.0);//调用上面的构造方法
    }
}
```

### 2.4 包

#### 2.4.1 管理架构（IDEA）

project->module->package->class

用文件夹来管理包，一个文件夹下的所有文件时一个包，包名就是那个文件夹的名字

有点类似于include

包里面的点代表一个文件层次

#### 2.4.2 使用

```java
import display.*;//导入display下所有包
import display.Display
```

### 2.5 static（类XX）

static声明一个类变量或类方法属于这个类（这个类的全部成员，而非某个成员）

static方法只能访问static的成员变量

### 2.6 继承

- class A extends B  A继承B
- 父类private数据域无法被子类访问
- 是一种is-a的关系

#### 2.6.1 super关键字

- 调用 父类类的构造方法: super(argumenets)，这个调用必须是构造方法的第一条语句

- 在任何情况下，构造一个类的实例时，将会沿着继承链的所有父类的构造方法。
- 调用父类的方法 super.方法名（参数）；

#### 2.6.2 方法重写与重载

- 重写需要在子类中使用和父类一样的签名以及一样的返回值类型
- 仅当实例方法可以访问时才能被覆盖
- 静态方法不能被覆盖，如果定义的静态方法在子类中被重新定义在父类中将被隐藏。
- 重写标注@Override

![img](D:\A personal date\GitHub\Java_learning\20171102-1.jpg)



#### 2.6.4Object类

事实上，java所有的类都继承自Object类

toString，返回类名@地址

equals，测试两个对象是否相等



### 2.7多态

任何使用父类对象的地方都可以使用子类的对象。

即多态意味着父类型的变量可以引用子类型的对象。

调用方法时由子类依次向父类查找。（动态绑定）

## 3.对象容器

### 3.0 基本数据类型作为对象

- 除了Integer和Character以外，其他都是首字母大写。
- 可以用基本数据类型值或者表示字符的字符串来构造包装类
- 包装类的实例无法改变，即创建对象后对象的内部值无法改变
- 每个都有doubleValue(),floatValue(),等方法，返回double，float等值
- 有compareTo( )方法，大于返回1，等于0，小于-1
- valueOf(string s)方法将对象初始为字符串值
- Integer.parseInt("num",进制) 将制定进制数值字符串转为10进制
- String.format("%x",26)将10进制转为16进制、
- BigInteger 和 BigDecimal类可以表示任意大小和京都的整数或十进制数
  - 通过add，subtract,multiple,divide,remainder，进行算术运算，compareTo比较

### 3.1StringBuilder and StringBuffer

- 均可以添加、插入或者追加新的内容

- StringBuffer修改缓冲区的方法是同步的，多任务并发访问使用

- 由于 StringBuilder 相较于 StringBuffer 有速度优势，所以多数情况下建议使用 StringBuilder 类。然而在应用程序要求线程安全的情况下，则必须使用 StringBuffer 类。

- ## StringBuffer 方法

  以下是 StringBuffer 类支持的主要方法：

  | 序号 | 方法描述                                                     |
  | :--- | :----------------------------------------------------------- |
  | 1    | public StringBuffer append(String s) 将指定的字符串追加到此字符序列。 |
  | 2    | public StringBuffer reverse()  将此字符序列用其反转形式取代。 |
  | 3    | public delete(int start, int end) 移除此序列的子字符串中的字符。 |
  | 4    | public insert(int offset, int i) 将 `int` 参数的字符串表示形式插入此序列中。 |
  | 5    | replace(int start, int end, String str) 使用给定 `String` 中的字符替换此序列的子字符串中的字符。 |

  下面的列表里的方法和 String 类的方法类似：

  | 序号 | 方法描述                                                     |
  | :--- | :----------------------------------------------------------- |
  | 1    | int capacity() 返回当前容量。                                |
  | 2    | char charAt(int index) 返回此序列中指定索引处的 `char` 值。  |
  | 3    | void ensureCapacity(int minimumCapacity) 确保容量至少等于指定的最小值。 |
  | 4    | void getChars(int srcBegin, int srcEnd, char[] dst, int dstBegin) 将字符从此序列复制到目标字符数组 `dst`。 |
  | 5    | int indexOf(String str) 返回第一次出现的指定子字符串在该字符串中的索引。 |
  | 6    | int indexOf(String str, int fromIndex) 从指定的索引处开始，返回第一次出现的指定子字符串在该字符串中的索引。 |
  | 7    | int lastIndexOf(String str) 返回最右边出现的指定子字符串在此字符串中的索引。 |
  | 8    | int lastIndexOf(String str, int fromIndex) 返回 String 对象中子字符串最后出现的位置。 |
  | 9    | int length()  返回长度（字符数）。                           |
  | 10   | void setCharAt(int index, char ch) 将给定索引处的字符设置为 `ch`。 |
  | 11   | void setLength(int newLength) 设置字符序列的长度。           |
  | 12   | CharSequence subSequence(int start, int end) 返回一个新的字符序列，该字符序列是此序列的子序列。 |
  | 13   | String substring(int start) 返回一个新的 `String`，它包含此字符序列当前所包含的字符子序列。 |
  | 14   | String substring(int start, int end) 返回一个新的 `String`，它包含此序列当前所包含的字符子序列。 |
  | 15   | String toString() 返回此序列中数据的字符串表示形式。         |



### 3.2ArrayList(类似vector)

插入的类型不能是基本类型，必须是泛型。

```java
ArrayList<Object> arrayList = new ArrayList<>();
		//1.大小
		arrayList.size();
		//2.添加
		arrayList.add(new Object());
		//3.指定位置添加
		arrayList.add(0, new Object());
		//4.判断对象是否在容器内(引用判断) 返回 boolean 值
		arrayList.contains(new Object());
		//5.获取指定位置的对象(范围内)
		arrayList.get(index);
		//6.获取对象位置(有相同引用的对象 返回最前的下标)
		arrayList.indexOf(new Object());
		//7.删除指定下标的对象
		arrayList.remove(index);
		//8.删除指定对象(有相同引用删除 最前面的)
		arrayList.remove(new Object());
		//9.删除全部
		arrayList.clear();
		arrayList.removeAll(arrayList);
		//10.替换 指定下标的对象
		arrayList.set(index, new Object());
		//11.转换为指定泛型的数组
		Object []object = arrayList.toArray(new Object []{});
		//12.添加另一个容器的所有对象
		arrayList.addAll(new ArrayList());//添加到最后
		arrayList.addAll(index,new ArrayList());//在指定位置添加

```

## 4.异常处理

运行时错误会作为异常抛出。

异常是一种对象，表示阻止正常进行程序执行的错误或者情况。

